import{t as e,_ as t,a as r,b as i,c as n,d as o,s as a,e as s,f as c,g as l,i as u,h as d,j as f,S as h,F as v,k as g,l as p,m,r as b}from"./vendor.c632a8a0.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var y=["hex"],k=["from","to"],x=["points"];const w=e('<svg><circle stroke="black"></circle></svg>',4,!0),S=e('<svg><line stroke="black"></line></svg>',4,!0),q=e("<svg><polygon></polygon></svg>",4,!0);function C(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var _=function(){function e(r,i){n(this,e),t(this,"r",void 0),t(this,"q",void 0),this.r=r,this.q=i}return r(e,[{key:"valid",value:function(){return!this.equals(e.Invalid)}},{key:"xy",value:function(){return{x:480+1.5*this.q*60,y:480+60*(Math.sqrt(3)/2*this.q+Math.sqrt(3)*this.r)}}},{key:"distance",value:function(e){return(Math.abs(this.q-e.q)+Math.abs(this.r-e.r)+Math.abs(this.q+this.r-e.q-e.r))/2}},{key:"id",value:function(){return"hex".concat(this.r).concat(this.q)}},{key:"add",value:function(t){var r=i(t,2),n=r[0],o=r[1];return new e(this.r+n,this.q+o)}},{key:"sub",value:function(e){return[this.r-e.r,this.q-e.q]}},{key:"unitSub",value:function(e){var t=this.distance(e);return[(this.r-e.r)/t,(this.q-e.q)/t]}},{key:"validBoard",value:function(){return this.distance(new e(0,0))<=3}},{key:"equals",value:function(e){return this.r==e.r&&this.q==e.q}},{key:"alpha",value:function(){var e=this.q+5,t=5-this.r-(e<=5?0:e-5);return String.fromCharCode("a".charCodeAt(0)-1+e)+t}}],[{key:"fromString",value:function(t){if(2!=(t=t.toLowerCase()).length)return e.Invalid;var r=t.charCodeAt(0)-"a".charCodeAt(0)+1,i=+t[1];if(i<0||i>9||r<0||r>9)return e.Invalid;var n=new e(r<=5?5-i:10-i-r,r-5);return n.distance(new e(0,0))<=4?n:e.Invalid}}]),e}();function M(e){return Array.from(Array(Math.floor(e.length/2)).keys()).map((function(t){return _.fromString(e.slice(2*t,2*t+2))}))}function A(e){var t,r=e.hex,i=o(e,y),n=r.xy(),c=n.x,l=n.y;return t=w.cloneNode(!0),a(t,"cx",c),a(t,"cy",l),a(t,"stroke-width",5),s(t,i,!0,!1),t}function N(e){var t,r=e.from,i=e.to,n=o(e,k),l=r.xy(),u=i.xy();return t=S.cloneNode(!0),a(t,"stroke-width",5),s(t,n,!0,!1),c((function(e){var r=l.x,i=u.x,n=l.y,o=u.y;return r!==e._v$&&a(t,"x1",e._v$=r),i!==e._v$2&&a(t,"x2",e._v$2=i),n!==e._v$3&&a(t,"y1",e._v$3=n),o!==e._v$4&&a(t,"y2",e._v$4=o),e}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t}function B(e){var t,r=e.points,i=o(e,x),n=r.map((function(e){var t=e.xy(),r=t.x,i=t.y;return"".concat(r,",").concat(i)}));return t=q.cloneNode(!0),s(t,i,!0,!1),c((function(){return a(t,"points",n.join(" "))})),t}function I(e,t){for(var r=0;r<e.length;r++)if(e[r].equals(t))return r;return-1}t(_,"Invalid",new _(-1,-1));var T=function(){function e(){n(this,e),t(this,"pieces",void 0),this.pieces=new Map}return r(e,[{key:"set",value:function(e,t){this.pieces.set(e.alpha(),t)}},{key:"get",value:function(e){return this.pieces.get(e.alpha())}},{key:"delete",value:function(e){this.pieces.delete(e.alpha())}},{key:"length",get:function(){return this.pieces.size}},{key:"forEach",value:function(e){var t,r=C(this.pieces);try{for(r.s();!(t=r.n()).done;){var n=i(t.value,2),o=n[0],a=n[1];e(_.fromString(o),a)}}catch(s){r.e(s)}finally{r.f()}}}]),e}();function j(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function E(e){return"black"===e?"white":"black"}var O=[[0,1],[0,-1],[1,0],[-1,0],[1,-1],[-1,1]],P=function(){function e(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n(this,e),t(this,"pieces",void 0),t(this,"available",void 0),t(this,"captured",void 0),t(this,"gameType",void 0),t(this,"currentMove",void 0),t(this,"who",void 0),t(this,"kind",void 0),t(this,"selected",void 0),t(this,"gipfToRemove",void 0),this.pieces=new T,this.currentMove=this.who="white",this.who="white",this.kind="move",this.selected=[],this.gipfToRemove=[],this.captured={black:0,white:0},this.available={black:12+o,white:12+i},this.gameType=r;for(var a="basic"==r?"regular":"gipf",s=0,c=["e2","b5","h5"];s<c.length;s++){var l=c[s];this.pieces.set(_.fromString(l),{color:"white",kind:a})}for(var u=0,d=["e8","b2","h2"];u<d.length;u++){var f=d[u];this.pieces.set(_.fromString(f),{color:"black",kind:a})}}return r(e,[{key:"stats",value:function(){return{available:{black:this.available.black,white:this.available.white},captured:{black:this.captured.black,white:this.captured.white},status:"selected"!==this.kind?this.kind:"",color:this.who,kind:this.kind}}},{key:"movable",value:function(e,t){for(var r=t.sub(e),i=t;i.validBoard()&&this.pieces.get(i);)i=i.add(r);return i.validBoard()}},{key:"neighbors",value:function(e){return O.map((function(t){return e.add(t)})).filter((function(e){return e.validBoard()}))}},{key:"possibleMoves",value:function(e){var t=this;return this.neighbors(e).filter((function(r){return t.movable(e,r)}))}},{key:"move",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"regular";if(t)"string"==typeof t&&(t=_.fromString(t)),"string"==typeof e&&(e=_.fromString(e));else{if("string"!=typeof e)return!1;var n=M(e),o=i(n,2);e=o[0],t=o[1]}if(!("move"===this.kind&&t&&e&&e.valid()&&t.valid()&&this.movable(e,t)))return!1;console.log('g.move("'.concat(e.alpha()).concat(t.alpha(),'")'));for(var a=t.sub(e),s=t,c={color:this.currentMove,kind:r};this.pieces.get(s)&&s.validBoard();){var l=this.pieces.get(s);this.pieces.set(s,c),c=l,s=s.add(a)}return this.pieces.set(s,c),this.available[this.currentMove]--,this.updateState()}},{key:"quads",value:function(){var e,t=[],r=[],n=j(L);try{for(n.s();!(e=n.n()).done;){var o,a=i(e.value,2),s=a[0],c=a[1].unitSub(s),l=[-c[0],-c[1]];s=s.add(c);for(var u=null===(o=this.pieces.get(s))||void 0===o?void 0:o.color,d=1;s.validBoard();){var f;s=s.add(c);var h=null===(f=this.pieces.get(s))||void 0===f?void 0:f.color;if(h===u?d++:(u=h,d=1),u&&4===d){var v=[];v.push(s);for(var g=s.add(c);g.validBoard()&&this.pieces.get(g);g=g.add(c))v.push(g);for(var p=s.add(l);p.validBoard()&&this.pieces.get(p);p=p.add(l))v.push(p);"white"==u?r.push(v):t.push(v);break}}}}catch(m){n.e(m)}finally{n.f()}return{black:t,white:r}}},{key:"select",value:function(e){if("confirm quad"!=this.kind&&"confirm gipf"!=this.kind)return!1;"string"==typeof e&&(e=_.fromString(e));var t=this.quads()[this.who];if(t.length<2)return!1;for(var r=0,i=-1,n=0;n<t.length;n++)-1!==I(t[n],e)&&(r++,i=n);return!(r>1)&&(this.selected=t[i],this.updateState())}},{key:"toggleGipf",value:function(e){if("confirm gipf"!=this.kind)return!1;"string"==typeof e&&(e=_.fromString(e));var t=I(this.gipfToRemove,e);return-1==t?this.gipfToRemove.push(e):this.gipfToRemove.splice(t,1),!0}},{key:"removeSelected",value:function(){if("selected"!==this.kind&&"confirm gipf"!==this.kind||!this.selected)return!1;var e,t=j(this.selected);try{for(t.s();!(e=t.n()).done;){var r=e.value,i=this.pieces.get(r);"gipf"==i.kind&&-1==I(this.gipfToRemove,r)||(i.color==this.who?this.available[i.color]+="gipf"===i.kind?2:1:this.captured[E(i.color)]+="gipf"===i.kind?2:1,this.pieces.delete(r))}}catch(n){t.e(n)}finally{t.f()}return this.updateState()}},{key:"updateState",value:function(){var e=this.currentMove,t=E(this.currentMove);switch(this.kind){case"move":case"selected":case"confirm gipf":var r=this.quads();0==r.black.length&&0==r.white.length?(this.kind="move",this.currentMove=this.who=t,this.selected=[]):1===r[this.currentMove].length?(this.selected=r[this.currentMove][0],this.updateSelectedConfirmGipf()):r[this.currentMove].length>1?this.kind="confirm quad":1==r[t].length?(this.selected=r[t][0],this.who=t,this.updateSelectedConfirmGipf()):r[t].length>1&&(this.kind="confirm quad",this.who=t);break;case"confirm quad":this.updateSelectedConfirmGipf();break;default:return!1}return"move"===this.kind&&("standard"===this.gameType&&0==this.gipfPiecesOnBoard(t)?(this.kind="won",this.who=e):"standard"===this.gameType&&0==this.gipfPiecesOnBoard(e)?(this.kind="won",this.who=t):0==this.available[t]?(this.kind="won",this.who=e):0==this.available[e]&&(this.kind="won",this.who=t)),!0}},{key:"updateSelectedConfirmGipf",value:function(){var e=this;this.containsGipf(this.selected)?(this.kind="confirm gipf",this.gipfToRemove=this.selected.filter((function(t){var r=e.pieces.get(t);return"gipf"===r.kind&&r.color!==e.who}))):this.kind="selected"}},{key:"gipfPiecesOnBoard",value:function(e){var t=0;return this.pieces.forEach((function(r,i){i.color===e&&"gipf"===i.kind&&t++})),t}},{key:"containsGipf",value:function(e){var t,r=j(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if("gipf"===this.pieces.get(i).kind)return!0}}catch(n){r.e(n)}finally{r.f()}return!1}},{key:"boardPieces",value:function(){var e=this,t=[],r=this.quads()[this.who].flat();return this.pieces.forEach((function(i,n){var o=-1,a=-1!=I(e.selected,i),s=-1!=I(e.gipfToRemove,i);switch(e.kind){case"move":break;case"selected":a&&("gipf"!==n.kind||s)&&(o=1);break;case"confirm quad":switch(r.filter((function(e){return i.equals(e)})).length){case 0:break;case 1:default:o=0}break;case"confirm gipf":a&&(o="gipf"==n.kind?s?1:0:1)}t.push({hex:i,piece:n,highlight:o})})),t}}]),e}(),R=["text-red-200","text-red-500"],L=[["d1","i2"],["c1","i3"],["b1","i4"],["a1","i5"],["a2","h6"],["a3","g7"],["a4","f8"],["b1","b6"],["c1","c7"],["d1","d8"],["e1","e9"],["f1","f8"],["g1","g7"],["h1","h6"],["d8","i4"],["c7","i3"],["b6","i2"],["a5","i1"],["a4","h1"],["a3","g1"],["a2","f1"]].map((function(e){var t=i(e,2),r=t[0],n=t[1];return[_.fromString(r),_.fromString(n)]}));const U=e('<svg><circle cx="18" cy="18" r="8" class="fill-current stroke-current text-red-500"></circle></svg>',4,!0),z=e('<svg version="1.1" height="36" width="36" class="flex justify-center"><circle cx="18" cy="18" r="15" stroke="black" stroke-width="3"></circle></svg>'),F=e('<div class="max-w-4xl mx-auto mt-2"><dl class="rounded-lg bg-white shadow-lg grid grid-cols-5"><div class="flex flex-col border-b border-gray-100 p-3 text-center sm:border-0 sm:border-r"><dt class="order-2 mt-2 text-md leading-3 font-medium text-gray-500">white pieces</dt><dd class="order-1 text-3xl font-extrabold text-indigo-600"></dd></div><div class="flex flex-col border-b border-gray-100 p-3 text-center sm:border-0 sm:border-r"><dt class="order-2 mt-2 text-md leading-3 font-medium text-gray-500">white captured</dt><dd class="order-1 text-3xl font-extrabold text-indigo-600"></dd></div><div class="flex flex-col border-b border-gray-100 p-3 text-center sm:border-0 sm:border-r"><dt class="order-2 mt-2 text-md leading-3 font-medium text-gray-500"></dt><dd class="order-1 "></dd></div><div class="flex flex-col border-b border-gray-100 p-3 text-center sm:border-0 sm:border-r"><dt class="order-2 mt-2 text-md leading-3 font-medium text-gray-500">black pieces</dt><dd class="order-1 text-3xl font-extrabold text-indigo-600"></dd></div><div class="flex flex-col border-b border-gray-100 p-3 text-center sm:border-0 sm:border-r"><dt class="order-2 mt-2 text-md leading-3 font-medium text-gray-500">black captured</dt><dd class="order-1 text-3xl font-extrabold text-indigo-600"></dd></div></dl></div>'),K=e('<button type="button" class="inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">confirm gipf</button>');var D=function(e){return t=F.cloneNode(!0),r=t.firstChild.firstChild,i=r.firstChild.nextSibling,n=r.nextSibling,o=n.firstChild.nextSibling,s=n.nextSibling,l=s.firstChild,v=l.nextSibling,g=s.nextSibling,p=g.firstChild.nextSibling,m=g.nextSibling.firstChild.nextSibling,u(i,(function(){return e.state.available.white})),u(o,(function(){return e.state.captured.white})),u(l,d(h,{get when(){return"confirm gipf"!==e.state.kind},get fallback(){return t=K.cloneNode(!0),f(t,"click",e.onConfirmGipf,!0),t;var t},get children(){return e.state.status}})),u(v,d(h,{get when(){return e.state.status},get children(){var t=z.cloneNode(!0),r=t.firstChild;return u(t,d(h,{get when(){return"confirm quad"===e.state.kind||"confirm gipf"===e.state.kind},get children(){return U.cloneNode(!0)}}),null),c((function(){return a(r,"fill",e.state.color)})),t}})),u(p,(function(){return e.state.available.black})),u(m,(function(){return e.state.captured.black})),t;var t,r,i,n,o,s,l,v,g,p,m};l(["click"]);const H=e("<svg><g></g></svg>",4,!0),J=e('<svg><text text-anchor="middle"></text></svg>',4,!0);var Q=M("a1b1c1d1e1f1g1h1i1a2a3a4i2i3i4a5b6c7d8e9f8g7h6i5"),V=_.fromString("e1").xy(),W=["a1","b1","c1","d1","e1","f1","g1","h1","i1"],X=_.fromString("e9").xy(),Y=["a5","b6","c7","d8","e9","f8","g7","h6","i5"],Z=V.x-_.fromString("d1").xy().x,ee=function(e){return t=H.cloneNode(!0),u(t,d(B,{get points(){return M("b2b5e8h5h2e2")},fill:"rgb(255,251,235)",stroke:"none"}),null),u(t,d(v,{each:L,children:function(e){var t=i(e,2),r=t[0],n=t[1];return d(N,{from:r,to:n})}}),null),u(t,d(v,{each:Q,children:function(t){return d(A,{hex:t,r:15,fill:"black",className:"fill-current stroke-current hover={text-green-700",get id(){return t.id()},onClick:function(){return e.select(t)}})}}),null),u(t,d(v,{each:W,children:function(e,t){return r=J.cloneNode(!0),u(r,e),c((function(e){var i=V.x+(t()-4)*Z,n=V.y+48;return i!==e._v$&&a(r,"x",e._v$=i),n!==e._v$2&&a(r,"y",e._v$2=n),e}),{_v$:void 0,_v$2:void 0}),r;var r}}),null),u(t,d(v,{each:Y,children:function(e,t){return r=J.cloneNode(!0),u(r,e),c((function(e){var i=V.x+(t()-4)*Z,n=X.y-36;return i!==e._v$3&&a(r,"x",e._v$3=i),n!==e._v$4&&a(r,"y",e._v$4=n),e}),{_v$3:void 0,_v$4:void 0}),r;var r}}),null),t;var t};const te=e("<svg><g></g></svg>",4,!0);function re(e){var t,r=e.hex,i=e.piece,n=e.highlight,o=e.onClick;return t=te.cloneNode(!0),u(t,d(A,{hex:r,r:40,get fill(){return i.color}}),null),u(t,d(h,{get when(){return"gipf"===i.kind},get children(){return[d(A,{hex:r,r:20,get stroke(){return E(i.color)},fill:"transparent"}),")"]}}),null),u(t,d(h,{when:n>=0,get children(){return d(A,{hex:r,r:12,get className(){return"fill-current stroke-current ".concat(R[n])+(o?" hover:".concat(R[1-n]):"")},onClick:function(){return o(r)}})}}),null),t}const ie=e('<div><div class="max-w-4xl mx-auto"><svg version="1.1"></svg></div></div>');var ne=function(){var e=new P("standard"),t=g(null),r=i(t,2),n=r[0],o=r[1],s=function(t){if(t&&"move"===e.kind){var r=n();if(r)document.getElementById(r.id()).setAttribute("class","fill-current stroke-current hover:text-green-700");if(r&&r.equals(t))o(null);else document.getElementById(t.id()).setAttribute("class","fill-current stroke-current text-green-700"),o(t)}},c=g([]),l=i(c,2),f=l[0],h=l[1];p((function(){if(n()){var t=e.possibleMoves(n());t?h(t):s(n())}else h([])}));var b=g(null),y=i(b,2),k=y[0],x=y[1];p((function(){n()&&k()&&(s(n()),x(null),e.move(n(),k()),C(e.stats()))}));var w=m(e.stats()),S=i(w,2),q=S[0],C=S[1],$=g(e.boardPieces()),_=i($,2),M=_[0],N=_[1],B=function(){C(e.stats()),N(e.boardPieces())};p((function(){"selected"===q.kind&&setTimeout((function(){e.removeSelected(),B()}),1e3)})),p((function(){q.kind,q.color,q.available.black,q.available.white,q.captured.black,q.captured.white,N(e.boardPieces())}));var I,T,j,G=function(t){e.toggleGipf(t),B()},E=function(t){e.select(t),B()};return I=ie.cloneNode(!0),T=I.firstChild,j=T.firstChild,u(I,d(D,{state:q,onConfirmGipf:function(){e.removeSelected(),B()}}),T),a(j,"viewBox","0 0 ".concat(960," ").concat(960)),u(j,d(ee,{select:s}),null),u(j,d(v,{get each(){return M()},children:function(t){return d(re,{get hex(){return t.hex},get piece(){return t.piece},get highlight(){return t.highlight},get onClick(){return"confirm gipf"===e.kind?G:E}})}}),null),u(j,d(v,{get each(){return f()},children:function(e){return d(A,{hex:e,r:15,className:"fill-current stroke-current text-green-300 hover:text-green-600",onClick:function(){return x(e)}})}}),null),I},oe=function(){return d(ne,{})};b((function(){return d(oe,{})}),document.getElementById("root"));
